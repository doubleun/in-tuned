import '@styles/globals.css'
import { roboto as font } from '@fonts'
import { NextResponse } from 'next/server'
import { cookies } from 'next/headers'
import clsx from 'clsx'
import Image from 'next/image'

export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

const rootLayoutStyles = {
  // bgWrap: 'fixed h-full w-full overflow-hidden z-[-1]',
  bgWrap: 'absolute inset-0 h-[100svh] w-full overflow-visible z-[-1] bg-black',
  bg: 'relative bg-white dark:bg-transparent w-auto h-full px-6 md:px-14',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  //TODO: Handle dark mode with cookies
  // let response = NextResponse.next()
  // const cookieStore = cookies()
  // const currentTheme = cookieStore.get('theme')?.value

  // if (!currentTheme) response.cookies.set('theme', 'light')

  return (
    <html
      lang="en"
      // default dark theme
      className={clsx([font.className, 'dark'], {
        // ['dark']: currentTheme === 'dark'
      })}
    >
      <body>
        <div className={rootLayoutStyles.bgWrap}>
          <Image
            src={'/bg2.png'}
            alt="bg"
            priority
            fill={true}
            className="object-cover object-center opacity-50"
          />
        </div>
        <div className={rootLayoutStyles.bg}>{children}</div>
      </body>
    </html>
  )
}
